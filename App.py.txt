from flask import Flask

app = Flask(__name__)

products = [
    {"id":1, "name":"Product 1 (Unclear)", "price":1200, "desc":"Sample product description", "img":"C:/Users/Design/Downloads/PIcture/product1.jpg"},
    {"id":2, "name":"Royalx RBT-400 Earbuds", "price":3500, "desc":"Wireless earbuds with charging case", "img":"C:/Users/Design/Downloads/PIcture/product2.jpg"},
    {"id":3, "name":"Royal USB Lightning Cable", "price":800, "desc":"Fast PD charging cable for iPhone", "img":"C:/Users/Design/Downloads/PIcture/product3.jpg"},
    {"id":4, "name":"Royal USB Type-C Cable", "price":750, "desc":"Fast PD charging cable for Android", "img":"C:/Users/Design/Downloads/PIcture/product4.jpg"},
    {"id":5, "name":"Royal Mini Music Speaker RS-55", "price":2200, "desc":"Portable wireless mini speaker", "img":"C:/Users/Design/Downloads/PIcture/product5.jpg"},
    {"id":6, "name":"Royal Speaker RS-65", "price":2800, "desc":"Wireless speaker, deep bass", "img":"C:/Users/Design/Downloads/PIcture/product6.jpg"},
    {"id":7, "name":"Royal Handsfree RHE (Type-C)", "price":1000, "desc":"Wired handsfree with Type-C", "img":"C:/Users/Design/Downloads/PIcture/product7.jpg"},
    {"id":8, "name":"Royal Soundbar RS-4500", "price":6500, "desc":"Wireless soundbar speaker", "img":"C:/Users/Design/Downloads/PIcture/product8.jpg"},
    {"id":9, "name":"Wireless Earbuds (24H Battery)", "price":4000, "desc":"Long endurance wireless earbuds", "img":"C:/Users/Design/Downloads/PIcture/product9.jpg"},
    {"id":10, "name":"Product 10 (Unclear)", "price":1500, "desc":"Sample product description", "img":"C:/Users/Design/Downloads/PIcture/product10.jpg"},
]

@app.route("/")
def index():
    html = """<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Royalx Store</title>
  <style>
    body{margin:0;background:#0b1a3a;color:#fff;font-family:system-ui, Arial}
    .top{display:flex;justify-content:space-between;align-items:center;background:#143a86;padding:12px 16px}
    .layout{display:flex;min-height:calc(100vh - 56px)}
    .left{width:18%;background:#091836;padding:16px}
    .center{width:52%;padding:16px;display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .right{width:30%;background:#0a1e44;padding:16px}
    .card{background:#123a84;border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,.08);cursor:pointer}
    .card img{width:100%;height:180px;object-fit:cover;border-radius:10px}
    .btn{background:#1b4fb6;color:#fff;border:0;padding:8px 12px;border-radius:8px}
    .sale{margin-left:8px;color:#ff5a5a;font-weight:800}
    .muted{color:#9fc1ff}
    @media (max-width:1024px){ .left,.right{display:none} .center{width:100%} }
  </style>
</head>
<body>
  <div class="top">
    <div><b>Geman</b> &nbsp; <b>Royalx</b> &nbsp; <b>Errorex</b> &nbsp; <b>Others</b></div>
    <div>
      <input id="q" placeholder="Search…" />
      <select id="sort">
        <option value="">Sort by</option>
        <option value="low">Price: Low → High</option>
        <option value="high">Price: High → Low</option>
      </select>
    </div>
  </div>

  <div class="layout">
    <aside class="left">
      <h3>Categories</h3>
      <ul>
        <li>Earbuds</li><li>Cables</li><li>Speakers</li><li>Handsfree</li><li>Soundbars</li>
      </ul>
    </aside>

    <main class="center" id="grid">
    """ 
    for p in products:
        html += f"""
        <div class="card" onclick='show({{id:{p["id"]},"name":"{p["name"]}","price":{p["price"]},"desc":"{p["desc"]}","img":"{p["img"]}"}})'>
          <img src="{p["img"]}" alt="{p["name"]}" />
          <h4>{p["name"]}</h4>
          <p class="muted">PKR {p["price"]:,}</p>
          <button class="btn" onclick="event.stopPropagation()">Buy</button>
          <span class="sale">SALE</span>
        </div>
        """
    html += """
    </main>

    <aside class="right" id="details">
      <p>Select a product to see details</p>
    </aside>
  </div>

  <script>
    function show(p){
      const box = document.getElementById('details');
      box.innerHTML = `
        <img src="${p.img}" alt="${p.name}" style="width:100%;height:260px;object-fit:cover;border-radius:12px"/>
        <h2>${p.name}</h2>
        <p class="muted">PKR ${p.price.toLocaleString()}</p>
        <p>${p.desc}</p>
        <button class="btn">Add to Cart</button>
      `;
    }

    const q = document.getElementById('q');
    const sort = document.getElementById('sort');
    const grid = document.getElementById('grid');
    const cards = () => Array.from(grid.children);

    function apply(){
      const term = q.value.toLowerCase();
      let cs = cards();
      cs.forEach(c=>{
        const name = c.querySelector('h4').textContent.toLowerCase();
        c.style.display = name.includes(term) ? '' : 'none';
      });
      if(sort.value){
        cs = cs.filter(c=>c.style.display !== 'none');
        cs.sort((a,b)=>{
          const pa = parseInt(a.querySelector('.muted').textContent.replace(/[^\\d]/g,''));
          const pb = parseInt(b.querySelector('.muted').textContent.replace(/[^\\d]/g,''));
          return sort.value==='low' ? pa - pb : pb - pa;
        }).forEach(el=>grid.appendChild(el));
      }
    }

    q.addEventListener('input', apply);
    sort.addEventListener('change', apply);
  </script>
</body>
</html>
"""
    return html

if __name__ == "__main__":
    app.run(debug=True)
